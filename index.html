
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Neon One: IQ Brain Puzzle 2025</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Outfit', sans-serif;
      background-color: #000000;
      color: #ffffff;
      margin: 0;
      padding: 0;
      overflow: hidden;
      touch-action: none;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      height: 100dvh;
    }
    #root { height: 100%; width: 100%; display: flex; flex-direction: column; background: #000; }
    .bg-grid {
      background-image: radial-gradient(circle at 1px 1px, #ffffff08 1px, transparent 0);
      background-size: 30px 30px;
    }
    #initial-loader {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #000;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }
    .loader-circle {
      width: 40px;
      height: 40px;
      border: 4px solid #1a1a1a;
      border-top: 4px solid #fff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
  </style>

<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.0.0",
    "react-dom": "https://esm.sh/react-dom@19.0.0",
    "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
    "lucide-react": "https://esm.sh/lucide-react@0.460.0",
    "@google/genai": "https://esm.sh/@google/genai@1.3.0"
  }
}
</script>
</head>
<body class="bg-grid">
  <div id="initial-loader">
    <div class="loader-circle"></div>
    <p style="margin-top: 20px; font-size: 10px; color: #444; letter-spacing: 0.5em; font-weight: 900; text-transform: uppercase;">Neon One Initializing</p>
  </div>
  <div id="root"></div>
  
  <script type="text/babel" data-presets="react,typescript">
    import React, { useState, useEffect, useRef } from 'react';
    import ReactDOM from 'react-dom/client';
    import { 
      RotateCcw, Trophy, ArrowRight, Lightbulb, 
      Star, Home, Volume2, VolumeX, Play, 
      FastForward, Smartphone, ShieldCheck, Share2
    } from 'lucide-react';

    // --- CONFIG & CONSTANTS ---
    const COLORS = ['#00F2FF', '#FF00FF', '#39FF14', '#FFD700', '#FF3131'];
    
    // --- LEVEL ENGINE ---
    const getLevelData = (n) => {
      const nodeCount = n <= 5 ? 5 : n <= 15 ? 7 : n <= 30 ? 9 : 12;
      const nodes = [];
      const center = 200;
      const spread = 120 + (Math.sin(n) * 20);
      
      for(let i = 0; i < nodeCount - 1; i++) {
        const angle = (i * 2 * Math.PI) / (nodeCount - 1) + (n * 0.2);
        nodes.push({ id: i, x: center + Math.cos(angle) * spread, y: center + Math.sin(angle) * spread });
      }
      nodes.push({ id: nodeCount - 1, x: center, y: center });
      
      const edges = [];
      for(let i = 0; i < nodeCount - 1; i++) {
        edges.push({ from: i, to: (i + 1) % (nodeCount - 1) });
        edges.push({ from: i, to: nodeCount - 1 });
      }
      return { nodes, edges };
    };

    // --- AUDIO SYSTEM ---
    const audio = {
      ctx: null,
      init() { if(!this.ctx) this.ctx = new (window.AudioContext || window.webkitAudioContext)(); },
      play(f, t, d, v) {
        try {
          this.init();
          const o = this.ctx.createOscillator();
          const g = this.ctx.createGain();
          o.type = t; o.frequency.setValueAtTime(f, this.ctx.currentTime);
          g.gain.setValueAtTime(v, this.ctx.currentTime);
          g.gain.exponentialRampToValueAtTime(0.0001, this.ctx.currentTime + d);
          o.connect(g); g.connect(this.ctx.destination);
          o.start(); o.stop(this.ctx.currentTime + d);
        } catch(e) {}
      }
    };

    // --- COMPONENTS ---
    const BannerAd = () => (
      <div className="w-full h-[60px] bg-zinc-950/80 border border-white/5 flex items-center justify-between px-6 rounded-2xl overflow-hidden backdrop-blur-2xl mb-2">
        <div className="flex items-center gap-3">
          <div className="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white"><Smartphone size={16}/></div>
          <div className="flex flex-col">
            <span className="text-[10px] font-black uppercase text-white tracking-widest leading-none">AdMob Live</span>
            <span className="text-[7px] text-zinc-600 font-bold uppercase">UNIT_8223244910</span>
          </div>
        </div>
        <div className="text-[7px] bg-white text-black px-1.5 py-0.5 rounded-sm font-black uppercase">AD</div>
      </div>
    );

    const App = () => {
      const [view, setView] = useState('MENU');
      const [levelNum, setLevelNum] = useState(1);
      const [level, setLevel] = useState(null);
      const [current, setCurrent] = useState(null);
      const [used, setUsed] = useState(new Set());
      const [drawing, setDrawing] = useState(false);
      const [pos, setPos] = useState({ x: 0, y: 0 });
      const [muted, setMuted] = useState(false);
      const container = useRef(null);
      const color = COLORS[(levelNum - 1) % COLORS.length];

      useEffect(() => {
        const loader = document.getElementById('initial-loader');
        if (loader) { loader.style.opacity = '0'; setTimeout(() => loader.style.display = 'none', 500); }
      }, []);

      const start = (n) => {
        setLevel(getLevelData(n));
        setUsed(new Set());
        setCurrent(null);
        setView('GAME');
      };

      const onMove = (e) => {
        if (!drawing || !level || current === null) return;
        const r = container.current.getBoundingClientRect();
        const x = ((e.clientX - r.left) / r.width) * 400;
        const y = ((e.clientY - r.top) / r.height) * 400;
        setPos({ x, y });

        for (const n of level.nodes) {
          const d = Math.sqrt((n.x - x)**2 + (n.y - y)**2);
          if (d < 35 && n.id !== current) {
            const key = [current, n.id].sort().join('-');
            const edge = level.edges.find(ed => (ed.from === current && ed.to === n.id) || (ed.from === n.id && ed.to === current));
            if (edge && !used.has(key)) {
              const newUsed = new Set(used).add(key);
              setUsed(newUsed);
              setCurrent(n.id);
              if(!muted) audio.play(1000, 'sine', 0.05, 0.05);
              if (newUsed.size === level.edges.length) {
                setTimeout(() => { setView('WIN'); if(!muted) audio.play(800, 'sine', 0.5, 0.1); }, 100);
              }
              break;
            }
          }
        }
      };

      if (view === 'MENU') return (
        <div className="flex-1 bg-black flex flex-col items-center justify-between p-10">
          <div className="pt-20 text-center">
            <h1 className="text-[100px] font-black italic tracking-tighter leading-[0.6] text-white">NEON<br/><span className="text-zinc-800">ONE</span></h1>
            <p className="mt-8 text-zinc-800 font-black uppercase tracking-[0.4em] text-[8px]">IQ ENGINE v2025.1</p>
          </div>
          <button onClick={() => start(levelNum)} className="w-full max-w-[320px] bg-white text-black py-8 rounded-[3rem] font-black text-5xl active:scale-95 transition-all">PLAY</button>
          <BannerAd />
        </div>
      );

      return (
        <div className="flex-1 bg-black flex flex-col items-center justify-between pb-6">
          <div className="w-full px-8 pt-8 flex justify-between items-center">
            <button onClick={() => setView('MENU')} className="p-3 bg-zinc-900 rounded-xl text-white"><Home size={22}/></button>
            <div className="bg-zinc-900 px-6 py-2 rounded-full text-white font-black italic tracking-widest">LVL {levelNum}</div>
            <button onClick={() => { setUsed(new Set()); setCurrent(null); }} className="p-3 bg-zinc-900 rounded-xl text-white"><RotateCcw size={22}/></button>
          </div>

          <div ref={container} className="relative bg-[#040404] rounded-[3rem] border border-white/5" 
               style={{ width: 'min(90vw, 360px)', height: 'min(90vw, 360px)' }}
               onPointerMove={onMove} onPointerUp={() => setDrawing(false)}>
            <svg width="100%" height="100%" viewBox="0 0 400 400" className="pointer-events-none">
              {level?.edges.map((e, i) => {
                const n1 = level.nodes.find(n => n.id === e.from);
                const n2 = level.nodes.find(n => n.id === e.to);
                const isUsed = used.has([e.from, e.to].sort().join('-'));
                return <line key={i} x1={n1.x} y1={n1.y} x2={n2.x} y2={n2.y} stroke={isUsed ? color : "#111"} strokeWidth="20" strokeLinecap="round" style={{ filter: isUsed ? `drop-shadow(0 0 8px ${color})` : 'none' }} />;
              })}
              {drawing && current !== null && <line x1={level.nodes.find(n => n.id === current).x} y1={level.nodes.find(n => n.id === current).y} x2={pos.x} y2={pos.y} stroke={`${color}44`} strokeWidth="10" strokeDasharray="10,10" />}
              {level?.nodes.map(n => <circle key={n.id} cx={n.x} cy={n.y} r="16" fill={current === n.id ? "white" : "#050505"} stroke={current === n.id ? color : "#222"} strokeWidth="4" />)}
            </svg>
            <div className="absolute inset-0">
              {level?.nodes.map(n => <div key={n.id} className="absolute w-20 h-20 -translate-x-1/2 -translate-y-1/2" style={{ left: `${(n.x/400)*100}%`, top: `${(n.y/400)*100}%` }} onPointerDown={() => { setDrawing(true); setCurrent(n.id); if(!muted) audio.play(800, 'sine', 0.03, 0.05); }} />)}
            </div>
          </div>

          <div className="w-full px-8 max-w-[400px] flex flex-col gap-2">
            <button onClick={() => setMuted(!muted)} className="bg-zinc-900 py-3 rounded-xl text-zinc-500 font-bold uppercase text-[9px] tracking-widest flex items-center justify-center gap-2">
              {muted ? <VolumeX size={14}/> : <Volume2 size={14}/>} SOUND {muted ? 'OFF' : 'ON'}
            </button>
            <BannerAd />
          </div>

          {view === 'WIN' && (
            <div className="fixed inset-0 bg-black/98 flex flex-col items-center justify-center p-10 z-[1000] animate-in zoom-in duration-300">
              <Trophy size={100} className="text-yellow-400 mb-6 animate-bounce" />
              <h2 className="text-6xl font-black italic text-white mb-10 text-center tracking-tighter uppercase leading-none">IQ<br/>BOOSTED</h2>
              <button onClick={() => { setLevelNum(n => n + 1); start(levelNum + 1); }} className="w-full max-w-[300px] bg-white text-black py-7 rounded-full text-3xl font-black">NEXT CHALLENGE</button>
            </div>
          )}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
